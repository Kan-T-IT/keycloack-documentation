{"config":{"lang":["en","es"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Introducci\u00f3n a Keycloak","text":"<p>Keycloak es una soluci\u00f3n de inicio de sesi\u00f3n \u00fanico (SSO) para aplicaciones web y servicios web RESTful. El objetivo de Keycloak es simplificar la seguridad, facilitando a los desarrolladores de aplicaciones la tarea de proteger las aplicaciones y servicios que han implementado en su organizaci\u00f3n. Las caracter\u00edsticas de seguridad que normalmente los desarrolladores tendr\u00edan que escribir por s\u00ed mismos se proporcionan de manera predeterminada y se pueden adaptar f\u00e1cilmente a los requisitos individuales de tu organizaci\u00f3n. Keycloak ofrece interfaces de usuario personalizables para el inicio de sesi\u00f3n, el registro, la administraci\u00f3n y la gesti\u00f3n de cuentas. Tambi\u00e9n puedes usar Keycloak como una plataforma de integraci\u00f3n para conectarlo con servidores LDAP y Active Directory existentes, as\u00ed como delegar la autenticaci\u00f3n a proveedores de identidad externos como Facebook y Google.</p>"},{"location":"#caracteristicas","title":"Caracter\u00edsticas","text":"<p>Keycloak proporciona las siguientes caracter\u00edsticas:</p> <ul> <li>Inicio y cierre de sesi\u00f3n \u00fanico para aplicaciones de navegador.</li> <li>Soporte para OpenID Connect.</li> <li>Soporte para OAuth 2.0.</li> <li>Soporte para SAML.</li> <li>Identity Brokering - Autenticaci\u00f3n con proveedores de identidad externos mediante OpenID Connect o SAML.</li> <li>Inicio de sesi\u00f3n social - Permite el inicio de sesi\u00f3n con Google, GitHub, Facebook, Twitter y otras redes sociales.</li> <li>User Federation - Sincronizaci\u00f3n de usuarios desde servidores LDAP y Active Directory.</li> <li>Puente Kerberos - Autentica autom\u00e1ticamente a los usuarios que han iniciado sesi\u00f3n en un servidor Kerberos.</li> <li>Consola de administraci\u00f3n para la gesti\u00f3n centralizada de usuarios, roles, mapeos de roles, clientes y configuraci\u00f3n.</li> <li>Consola de cuentas que permite a los usuarios gestionar sus cuentas de forma centralizada.</li> <li>Soporte para temas - Personaliza todas las p\u00e1ginas orientadas a los usuarios para integrarlas con tus aplicaciones y marca.</li> <li>Autenticaci\u00f3n de dos factores - Soporte para TOTP/HOTP a trav\u00e9s de Google Authenticator o FreeOTP.</li> <li>Flujos de inicio de sesi\u00f3n - Registro de usuarios opcional, recuperaci\u00f3n de contrase\u00f1a, verificaci\u00f3n de correo electr\u00f3nico, requisito de actualizaci\u00f3n de contrase\u00f1a, etc.</li> <li>Gesti\u00f3n de sesiones - Los administradores y los propios usuarios pueden ver y gestionar las sesiones de usuario.</li> <li>Mapeadores de tokens - Mapea atributos de usuario, roles, etc. en tokens y declaraciones como desees.</li> <li>Pol\u00edticas de revocaci\u00f3n not-before por realm, aplicaci\u00f3n y usuario.</li> <li>Soporte para CORS - Los adaptadores de cliente tienen soporte incorporado para CORS.</li> <li>Interfaces de Proveedor de Servicios (SPI) - Un n\u00famero de SPI para personalizar varios aspectos del servidor. Flujos de autenticaci\u00f3n, proveedores de federaci\u00f3n de usuarios, mapeadores de protocolos y muchos m\u00e1s.</li> <li>Soporte para cualquier plataforma o lenguaje que tenga una biblioteca OpenID Connect Relying Party o SAML 2.0 Service Provider.</li> </ul>"},{"location":"#operaciones-basicas-de-keycloak","title":"Operaciones b\u00e1sicas de Keycloak","text":"<p>Keycloak es un servidor independiente que gestionas en tu red. Las aplicaciones se configuran para apuntar a este servidor y estar protegidas por \u00e9l. Keycloak utiliza est\u00e1ndares de protocolo abierto como OpenID Connect o SAML 2.0 para proteger tus aplicaciones. Las aplicaciones de navegador redirigen el navegador de un usuario desde la aplicaci\u00f3n al servidor de autenticaci\u00f3n de Keycloak, donde introducen sus credenciales. Esta redirecci\u00f3n es importante porque los usuarios est\u00e1n completamente aislados de las aplicaciones, y las aplicaciones nunca ven las credenciales de un usuario. En lugar de ello, las aplicaciones reciben un token de identidad o una aserci\u00f3n que est\u00e1 firmada criptogr\u00e1ficamente. Estos tokens pueden contener informaci\u00f3n de identidad como nombre de usuario, direcci\u00f3n, correo electr\u00f3nico y otros datos de perfil. Tambi\u00e9n pueden contener datos de permisos para que las aplicaciones puedan tomar decisiones de autorizaci\u00f3n. Estos tokens tambi\u00e9n se pueden usar para realizar invocaciones seguras en servicios basados en REST.</p>"},{"location":"#conceptos-y-terminos-clave","title":"Conceptos y t\u00e9rminos clave","text":"<p>Antes de intentar usar Keycloak para proteger tus aplicaciones web y servicios REST, considera estos conceptos y t\u00e9rminos clave.</p> <ul> <li>Usuarios: Entidades que pueden iniciar sesi\u00f3n en tu sistema. Pueden tener atributos asociados como correo electr\u00f3nico, nombre de usuario, direcci\u00f3n, n\u00famero de tel\u00e9fono y fecha de nacimiento. Pueden ser asignados a grupos y tener roles espec\u00edficos asignados a ellos.</li> <li>Autenticaci\u00f3n: El proceso de identificar y validar a un usuario.</li> <li>Autorizaci\u00f3n: El proceso de otorgar acceso a un usuario.</li> <li>Credenciales: Son piezas de datos que Keycloak utiliza para verificar la identidad de un usuario. Algunos ejemplos son contrase\u00f1as, contrase\u00f1as de un solo uso, certificados digitales o incluso huellas dactilares.</li> <li>Roles: Identifican un tipo o categor\u00eda de usuario. Admin, usuario, gerente y empleado son roles t\u00edpicos que pueden existir en una organizaci\u00f3n. Las aplicaciones a menudo asignan acceso y permisos a roles espec\u00edficos en lugar de a usuarios individuales, ya que tratar con usuarios puede ser demasiado detallado y dif\u00edcil de gestionar.</li> <li>Mapeo de roles de usuario: Define una relaci\u00f3n entre un rol y un usuario. Un usuario puede estar asociado con uno o m\u00e1s roles. Esta informaci\u00f3n de mapeo de roles se puede encapsular en tokens y aserciones para que las aplicaciones decidan los permisos de acceso en varios recursos que gestionan.</li> <li>Roles compuestos: Un rol compuesto es un rol que puede estar asociado con otros roles. Por ejemplo, un rol compuesto de superusuario podr\u00eda estar asociado con los roles de administrador de ventas y administrador de entrada de pedidos. Si un usuario est\u00e1 mapeado al rol de superusuario, tambi\u00e9n hereda los roles de administrador de ventas y administrador de entrada de pedidos.</li> <li>Grupos: Gestionan grupos de usuarios. Se pueden definir atributos para un grupo. Tambi\u00e9n se pueden mapear roles a un grupo. Los usuarios que se convierten en miembros de un grupo heredan los atributos y mapeos de roles que define ese grupo.</li> <li>Realms: Un realm gestiona un conjunto de usuarios, credenciales, roles y grupos. Un usuario pertenece e inicia sesi\u00f3n en un realm. Los realms est\u00e1n aislados entre s\u00ed y solo pueden gestionar y autenticar a los usuarios que controlan.</li> <li>Clientes: Son entidades que pueden solicitar a Keycloak que autentique a un usuario. Con mayor frecuencia, los clientes son aplicaciones y servicios que desean utilizar Keycloak para protegerse y proporcionar una soluci\u00f3n de inicio de sesi\u00f3n \u00fanico. Los clientes tambi\u00e9n pueden ser entidades que solo desean solicitar informaci\u00f3n de identidad o un token de acceso para poder invocar de manera segura otros servicios en la red que est\u00e1n protegidos por Keycloak.</li> <li>Adaptadores de cliente: Son complementos que instalas en tu entorno de aplicaci\u00f3n para poder comunicarte y estar protegido por Keycloak. Keycloak tiene varios adaptadores para diferentes plataformas que puedes descargar. Tambi\u00e9n hay adaptadores de terceros disponibles para entornos que no cubrimos.</li> <li>Consentimiento: Es cuando, como administrador, quieres que un usuario d\u00e9 permiso a un cliente antes de que ese cliente pueda participar en el proceso de autenticaci\u00f3n. Despu\u00e9s de que un usuario proporcione sus credenciales, Keycloak mostrar\u00e1 una pantalla identificando al cliente que solicita el inicio de sesi\u00f3n y qu\u00e9 informaci\u00f3n de identidad solicita del usuario. El usuario puede decidir si otorga o no la solicitud.</li> <li>Scopes de cliente: Al registrar un cliente, debes definir mapeadores de protocolos y mapeos de alcance de roles para ese cliente. A menudo es \u00fatil almacenar un client scope para facilitar la creaci\u00f3n de nuevos clientes compartiendo algunas configuraciones comunes. Esto tambi\u00e9n es \u00fatil para solicitar algunos claims o roles de manera condicional, basados en el valor del par\u00e1metro scope. Keycloak proporciona el concepto de client scope para esto.</li> <li>Roles de cliente: Los clientes pueden definir roles que les son espec\u00edficos. B\u00e1sicamente, es un espacio de nombres de roles dedicado al cliente.</li> <li>Token de identidad: Un token que proporciona informaci\u00f3n de identidad sobre el usuario. Parte de la especificaci\u00f3n OpenID Connect.</li> <li>Token de acceso: Un token que puede proporcionarse como parte de una solicitud HTTP que otorga acceso al servicio que se est\u00e1 invocando. Esto forma parte de la especificaci\u00f3n OpenID Connect y OAuth 2.0.</li> <li>Aserci\u00f3n: Informaci\u00f3n sobre un usuario. Esto generalmente se refiere a un blob XML que se incluye en una respuesta de autenticaci\u00f3n SAML que proporciona metadatos de identidad sobre un usuario autenticado.</li> <li>Cuenta de servicio: Cada cliente tiene una cuenta de servicio integrada que le permite obtener un token de acceso.</li> <li>Direct Grant: Una forma en la que un cliente puede obtener un token de acceso en nombre de un usuario mediante una invocaci\u00f3n REST.</li> <li>Mapeadores de protocolo: Para cada cliente, puedes personalizar qu\u00e9 claims y aserciones se almacenan en el token OIDC o la aserci\u00f3n SAML. Lo haces por cliente creando y configurando mapeadores de protocolo.</li> <li>Sesi\u00f3n: Cuando un usuario inicia sesi\u00f3n, se crea una sesi\u00f3n para gestionar la sesi\u00f3n de inicio de sesi\u00f3n. Una sesi\u00f3n contiene informaci\u00f3n como cu\u00e1ndo inici\u00f3 sesi\u00f3n el usuario y qu\u00e9 aplicaciones han participado en el inicio de sesi\u00f3n \u00fanico durante esa sesi\u00f3n. Tanto los administradores como los usuarios pueden ver la informaci\u00f3n de la sesi\u00f3n.</li> <li>Proveedor de federaci\u00f3n de usuarios: Keycloak puede almacenar y gestionar usuarios. A menudo, las empresas ya tienen servicios LDAP o Active Directory que almacenan informaci\u00f3n de usuario y credenciales. Puedes configurar Keycloak para validar credenciales desde esos almacenes externos y extraer informaci\u00f3n de identidad.</li> <li>Proveedor de identidad: Un proveedor de identidad (IDP) es un servicio que puede autenticar a un usuario. Keycloak es un IDP.</li> <li>Federaci\u00f3n de proveedores de identidad: Keycloak se puede configurar para delegar la autenticaci\u00f3n a uno o m\u00e1s IDP. El inicio de sesi\u00f3n social a trav\u00e9s de Facebook o Google es un ejemplo de federaci\u00f3n de proveedores de identidad. Tambi\u00e9n puedes conectar Keycloak para delegar la autenticaci\u00f3n a cualquier otro IDP OpenID Connect o SAML 2.0.</li> <li>Mapeadores de proveedores de identidad: Al realizar la federaci\u00f3n de IDP, puedes mapear tokens entrantes y aserciones a atributos de usuario y sesi\u00f3n. Esto te ayuda a propagar informaci\u00f3n de identidad desde el IDP externo a tu cliente que solicita la autenticaci\u00f3n.</li> <li>Acciones requeridas: Son acciones que un usuario debe realizar durante el proceso de autenticaci\u00f3n. Un usuario no podr\u00e1 completar el proceso de autenticaci\u00f3n hasta que estas acciones se completen. Por ejemplo, un administrador puede programar que los usuarios restablezcan sus contrase\u00f1as cada mes. Se configurar\u00eda una acci\u00f3n requerida de actualizaci\u00f3n de contrase\u00f1a para todos estos usuarios.</li> <li>Flujos de autenticaci\u00f3n: Son flujos de trabajo que un usuario debe realizar al interactuar con ciertos aspectos del sistema. Un flujo de inicio de sesi\u00f3n puede definir qu\u00e9 tipos de credenciales se requieren. Un flujo de registro define qu\u00e9 informaci\u00f3n de perfil debe ingresar un usuario y si se debe utilizar algo como reCAPTCHA para filtrar bots. El flujo de restablecimiento de credenciales define qu\u00e9 acciones debe realizar un usuario antes de poder restablecer su contrase\u00f1a.</li> <li>Eventos: Son flujos de auditor\u00eda que los administradores pueden ver y conectar.</li> <li>Temas: Cada pantalla proporcionada por Keycloak est\u00e1 respaldada por un tema. Los temas definen plantillas HTML y hojas de estilo que puedes sobrescribir seg\u00fan sea necesario.</li> </ul>"},{"location":"clientes/","title":"Gesti\u00f3n de clientes OpenID Connect y SAML","text":"<p>Los clientes son entidades que pueden solicitar la autenticaci\u00f3n de un usuario. Existen dos tipos de clientes. El primer tipo es una aplicaci\u00f3n que quiere participar en un inicio de sesi\u00f3n \u00fanico (SSO). Estos clientes solo desean que Keycloak proporcione seguridad para ellos. El otro tipo de cliente es aquel que solicita un token de acceso para invocar otros servicios en nombre del usuario autenticado. Esta secci\u00f3n aborda varios aspectos de la configuraci\u00f3n de clientes y las diferentes formas de hacerlo.</p>"},{"location":"clientes/clientes_openid_connect/","title":"Clientes OpenID Connect","text":""},{"location":"clientes/clientes_openid_connect/#gestion-de-clientes-openid-connect","title":"Gesti\u00f3n de clientes OpenID Connect","text":"<p>OpenID Connect es el protocolo recomendado para asegurar aplicaciones. Fue dise\u00f1ado desde el principio para ser compatible con la web y funciona mejor con aplicaciones HTML5/JavaScript.</p>"},{"location":"clientes/clientes_openid_connect/#creacion-de-un-cliente-openid-connect","title":"Creaci\u00f3n de un cliente OpenID Connect","text":"<p>Para proteger una aplicaci\u00f3n que utiliza el protocolo OpenID Connect, debes crear un cliente.</p> <p></p> <ol> <li> <p>Haz clic en Clients en el men\u00fa.</p> </li> <li> <p>Haz clic en Create client.</p> <p></p> </li> <li> <p>Deja el Client type como OpenID Connect.</p> </li> <li> <p>Ingresa un Client ID.</p> <p>Tip</p> <p>Este ID es una cadena alfanum\u00e9rica que se utiliza en las solicitudes OIDC y en la base de datos de Keycloak para identificar al cliente.</p> </li> <li> <p>Proporciona un Nombre para el cliente.</p> <p>Tip</p> <p>Si planeas localizar este nombre, configura un valor de cadena de reemplazo. Por ejemplo, un valor de cadena como ${myapp}.</p> </li> <li> <p>Haz clic en Next en las ventanas siguientes, manteniendo los datos predeterminados, hasta que puedas guardar la informaci\u00f3n del nuevo cliente.</p> </li> </ol> <p>Esta acci\u00f3n crea el cliente y te lleva a la pesta\u00f1a Configuraci\u00f3n, donde puedes realizar la configuraci\u00f3n b\u00e1sica.</p>"},{"location":"clientes/clientes_openid_connect/#configuracion-basica","title":"Configuraci\u00f3n b\u00e1sica","text":"<p>La pesta\u00f1a de Configuraci\u00f3n incluye muchas opciones para configurar este cliente.</p> <p></p>"},{"location":"clientes/clientes_openid_connect/#configuracion-general","title":"Configuraci\u00f3n general","text":"<ul> <li> <p>Client ID: La cadena alfanum\u00e9rica que se utiliza en las solicitudes OIDC y en la base de datos de Keycloak para identificar al cliente.</p> </li> <li> <p>Name: El nombre para el cliente en la pantalla de la UI de Keycloak. Para localizar el nombre, configura un valor de cadena de reemplazo. Por ejemplo, un valor de cadena como ${myapp}.</p> </li> <li> <p>Description: La descripci\u00f3n del cliente. Esta configuraci\u00f3n tambi\u00e9n se puede localizar.</p> </li> <li> <p>Always Display in Console: Siempre listar este cliente en la Consola de Cuenta, incluso si este usuario no tiene una sesi\u00f3n activa.</p> </li> </ul>"},{"location":"clientes/clientes_openid_connect/#configuracion-de-acceso","title":"Configuraci\u00f3n de acceso","text":"<ul> <li> <p>Root URL: Si Keycloak utiliza URLs relativas configuradas, este valor se antepone a ellas.</p> </li> <li> <p>Home URL: Proporciona la URL predeterminada para cuando el servidor de autenticaci\u00f3n necesita redirigir o enlazar de nuevo al cliente.</p> </li> <li> <p>Valid Redirect URIs: Campo obligatorio. Ingresa un patr\u00f3n de URL y haz clic en + para agregar y en - para eliminar URLs existentes, luego haz clic en Save. Se utiliza una coincidencia exacta (sensible a may\u00fasculas) para comparar las URIs de redirecci\u00f3n v\u00e1lidas.   Puedes usar comodines al final del patr\u00f3n de URL, por ejemplo, http://host.com/path/*. Para evitar problemas de seguridad, si la URI de redirecci\u00f3n pasada contiene la parte de informaci\u00f3n del usuario o su ruta gestiona el acceso al directorio padre (/../), no se realiza una comparaci\u00f3n con comod\u00edn, sino una coincidencia exacta est\u00e1ndar y segura.   El comod\u00edn completo * tambi\u00e9n se puede configurar como una URI de redirecci\u00f3n v\u00e1lida para permitir cualquier URI de redirecci\u00f3n http o https. No lo uses en entornos de producci\u00f3n.   Los patrones de URI de redirecci\u00f3n exclusivos suelen ser m\u00e1s seguros. Consulta URIs de Redirecci\u00f3n No Espec\u00edficas para m\u00e1s informaci\u00f3n.</p> </li> <li> <p>Web Origins: Ingresa un patr\u00f3n de URL y haz clic en + para agregar y en - para eliminar URLs existentes. Haz clic en Guardar.   Esta opci\u00f3n maneja el Intercambio de Recursos de Origen Cruzado (CORS). Si el JavaScript del navegador intenta una solicitud HTTP AJAX a un servidor cuyo dominio es diferente del que proviene el c\u00f3digo JavaScript, la solicitud debe usar CORS. El servidor debe manejar las solicitudes CORS, de lo contrario, el navegador no mostrar\u00e1 ni permitir\u00e1 que se procese la solicitud. Este protocolo protege contra ataques XSS, CSRF y otros basados en JavaScript.   Las URLs de dominio listadas aqu\u00ed se incrustan dentro del token de acceso enviado a la aplicaci\u00f3n cliente. La aplicaci\u00f3n cliente utiliza esta informaci\u00f3n para decidir si permitir que se invoque una solicitud CORS en ella. Solo los adaptadores de cliente de Keycloak soportan esta caracter\u00edstica. Consulta la Gu\u00eda de Seguridad de Aplicaciones y Servicios para m\u00e1s informaci\u00f3n.</p> </li> <li> <p>Admin URL: Punto de retorno de llamada para un cliente. El servidor utiliza esta URL para realizar devoluciones de llamada, como empujar pol\u00edticas de revocaci\u00f3n, realizar un cierre de sesi\u00f3n de backchannel y otras operaciones administrativas. Para los adaptadores de servlet de Keycloak, esta URL puede ser la URL ra\u00edz de la aplicaci\u00f3n servlet. Para m\u00e1s informaci\u00f3n, consulta la Gu\u00eda de Seguridad de Aplicaciones y Servicios.</p> </li> </ul>"},{"location":"clientes/clientes_openid_connect/#configuracion-de-capacidad","title":"Configuraci\u00f3n de capacidad","text":"<ul> <li> <p>Client authentication: El tipo de cliente OIDC.</p> <ul> <li> <p>ON: Para clientes del lado del servidor que realizan inicios de sesi\u00f3n en el navegador y requieren secretos de cliente al hacer una Solicitud de Token de Acceso. Esta configuraci\u00f3n debe ser utilizada para aplicaciones del lado del servidor.</p> </li> <li> <p>OFF: Para clientes del lado del cliente que realizan inicios de sesi\u00f3n en el navegador. Dado que no es posible garantizar que los secretos se mantengan seguros con clientes del lado del cliente, es importante restringir el acceso configurando las URIs de redirecci\u00f3n correctas.</p> </li> </ul> </li> <li> <p>Authorization: Habilita o deshabilita el soporte de autorizaci\u00f3n granular para este cliente.</p> </li> <li> <p>Standard Flow: Si est\u00e1 habilitado, este cliente puede usar el Flujo de C\u00f3digo de Autorizaci\u00f3n OIDC.</p> </li> <li> <p>Direct Access Grants: Si est\u00e1 habilitado, este cliente puede usar las Concesiones de Acceso Directo OIDC.</p> </li> <li> <p>Implicit Flow: Si est\u00e1 habilitado, este cliente puede usar el Flujo Impl\u00edcito OIDC.</p> </li> <li> <p>Service account roles: Si est\u00e1 habilitado, este cliente puede autenticarse en Keycloak y recuperar un token de acceso dedicado a este cliente. En t\u00e9rminos de la especificaci\u00f3n OAuth2, esto habilita el soporte de Concesi\u00f3n de Credenciales de Cliente para este cliente.</p> </li> <li> <p>Auth 2.0 Device Authorization Grant: Si est\u00e1 habilitado, este cliente puede usar la Concesi\u00f3n de Autorizaci\u00f3n de Dispositivo OIDC.</p> </li> <li> <p>Concesi\u00f3n de CIBA OIDC: Si est\u00e1 habilitado, este cliente puede usar la Concesi\u00f3n de Autenticaci\u00f3n de Backchannel Iniciada por Cliente OIDC.</p> </li> </ul>"},{"location":"clientes/clientes_openid_connect/#configuracion-de-inicio-de-sesion","title":"Configuraci\u00f3n de inicio de sesi\u00f3n","text":"<ul> <li> <p>Login theme: Un tema para usar en las p\u00e1ginas de inicio de sesi\u00f3n, OTP, registro de concesiones y olvido de contrase\u00f1a.</p> </li> <li> <p>Consent required: Si est\u00e1 habilitado, los usuarios deben dar su consentimiento para el acceso del cliente.</p> </li> <li> <p>Para clientes del lado del cliente que realizan inicios de sesi\u00f3n en el navegador. Dado que no es posible garantizar que los secretos se mantengan seguros con clientes del lado del cliente, es importante restringir el acceso configurando las URIs de redirecci\u00f3n correctas.</p> </li> <li> <p>Display client on screen: Este interruptor se aplica si Consentimiento requerido est\u00e1 desactivado.</p> <ul> <li> <p>Off: La pantalla de consentimiento solo contendr\u00e1 los consentimientos correspondientes a los alcances del cliente configurados.</p> </li> <li> <p>On: Tambi\u00e9n habr\u00e1 un \u00edtem en la pantalla de consentimiento sobre este cliente en s\u00ed.</p> </li> </ul> </li> <li> <p>Client consent screen text: Se aplica si Consentimiento requerido y Mostrar cliente en pantalla est\u00e1n habilitados. Contiene el texto que estar\u00e1 en la pantalla de consentimiento sobre los permisos para este cliente.</p> </li> </ul>"},{"location":"clientes/clientes_openid_connect/#configuracion-de-cierre-de-sesion","title":"Configuraci\u00f3n de cierre de sesi\u00f3n","text":"<ul> <li>Front channel logout: Si el Cierre de Sesi\u00f3n de Canal Frontal est\u00e1 habilitado, la aplicaci\u00f3n deber\u00eda ser capaz de cerrar la sesi\u00f3n de los usuarios a trav\u00e9s del canal frontal seg\u00fan la especificaci\u00f3n de Cierre de Sesi\u00f3n de Canal Frontal de OpenID Connect. Si est\u00e1 habilitado, tambi\u00e9n deber\u00edas proporcionar la URL de Cierre de Sesi\u00f3n de Canal Frontal.</li> <li>Front-channel logout URL: URL que ser\u00e1 utilizada por Keycloak para enviar solicitudes de cierre de sesi\u00f3n a clientes a trav\u00e9s del canal frontal.</li> <li>Backchannel logout URL: URL que har\u00e1 que el cliente se cierre autom\u00e1ticamente cuando se env\u00ede una solicitud de cierre de sesi\u00f3n a este realm (a trav\u00e9s del end_session_endpoint). Si se omite, no se env\u00edan solicitudes de cierre de sesi\u00f3n al cliente.</li> <li>Backchannel logout session required: Especifica si se incluye un reclamo de ID de sesi\u00f3n en el Token de Cierre de Sesi\u00f3n (Logout Token) cuando se utiliza la URL de Logout por Canal de Fondo (Backchannel Logout URL).</li> <li>Backchannel logout revoke offline sessions: Especifica si se incluye un evento revoke_offline_access en el Token de Cierre de Sesi\u00f3n (Logout Token) cuando se utiliza la URL de Logout por Canal de Fondo (Backchannel Logout URL). Keycloak revocar\u00e1 las sesiones offline al recibir un Token de Cierre de Sesi\u00f3n con este evento.</li> </ul>"},{"location":"clientes/clientes_saml/","title":"Clientes SAML","text":""},{"location":"clientes/clientes_saml/#gestion-de-clientes-saml","title":"GEstion de Clientes SAML","text":"<p>SAML (Security Assertion Markup Language) es un protocolo popular para asegurar aplicaciones, especialmente en entornos empresariales. Fue dise\u00f1ado para permitir el intercambio seguro de informaci\u00f3n de autenticaci\u00f3n y autorizaci\u00f3n entre un proveedor de identidad (IdP) y un proveedor de servicios (SP), siendo ampliamente compatible con aplicaciones web tradicionales y de empresa.</p>"},{"location":"clientes/clientes_saml/#creacion-de-un-cliente-saml","title":"Creaci\u00f3n de un cliente SAML","text":"<p>Keycloak es compatible con SAML 2.0 para aplicaciones registradas. Se admiten enlaces POST y Redirect. Puedes elegir requerir la validaci\u00f3n de la firma del cliente. Tambi\u00e9n puedes hacer que el servidor firme y/o cifre las respuestas.</p> <ol> <li> <p>Haz clic en Clients en el men\u00fa.</p> </li> <li> <p>Haz clic en Create client para ir a la p\u00e1gina de Crear cliente.</p> </li> <li> <p>Establece el Client type en SAML.</p> </li> </ol> <p></p> <ol> <li> <p>Introduce el Client ID. A menudo, este es un URL y es el valor esperado del emisor en las solicitudes SAML enviadas por la aplicaci\u00f3n.</p> </li> <li> <p>Haz clic en Next y luego en Save. Esta acci\u00f3n crea el cliente y te lleva a la pesta\u00f1a Configuraci\u00f3n.</p> </li> </ol> <p>Las siguientes secciones describen cada configuraci\u00f3n en esta pesta\u00f1a.</p>"},{"location":"clientes/clientes_saml/#pestana-configuracion","title":"Pesta\u00f1a Configuraci\u00f3n","text":"<p>La pesta\u00f1a Configuraci\u00f3n incluye muchas opciones para configurar este cliente.</p> <p></p>"},{"location":"clientes/clientes_saml/#configuraciones-generales","title":"Configuraciones generales","text":"<ul> <li> <p>Client ID: La cadena alfanum\u00e9rica que se usa en las solicitudes OIDC y en la base de datos de Keycloak para identificar al cliente. Este valor debe coincidir con el valor del emisor enviado con AuthNRequests. Keycloak extrae el emisor de la solicitud SAML de Authn y lo compara con un cliente usando este valor.</p> </li> <li> <p>Name: El nombre del cliente en la pantalla de UI de Keycloak. Para localizar el nombre, configura un valor de cadena de reemplazo. Por ejemplo, un valor de cadena como ${miapp}. Consulta la Gu\u00eda del desarrollador del servidor para obtener m\u00e1s informaci\u00f3n.</p> </li> <li> <p>Description: La descripci\u00f3n del cliente. Esta configuraci\u00f3n tambi\u00e9n se puede localizar.</p> </li> <li> <p>Always Display in Console: Listar siempre este cliente en la Consola de cuentas, incluso si este usuario no tiene una sesi\u00f3n activa.</p> </li> </ul>"},{"location":"clientes/clientes_saml/#configuraciones-de-acceso","title":"Configuraciones de acceso","text":"<ul> <li> <p>Root URL: Cuando Keycloak utiliza un URL relativo configurado, este valor se antepone al URL.</p> </li> <li> <p>Home URL: Si Keycloak necesita enlazar con un cliente, se usa esta URL.</p> </li> <li> <p>Valid Redirect URIs: Introduce un patr\u00f3n de URL y haz clic en el signo + para agregar. Haz clic en el signo - para eliminar. Haz clic en Guardar para guardar estos cambios. Los valores de comod\u00edn solo se permiten al final de una URL. Por ejemplo, http://host.com/*$$. Este campo se utiliza cuando los puntos finales SAML exactos no est\u00e1n registrados y Keycloak extrae la URL del consumidor de afirmaciones de una solicitud.</p> </li> <li> <p>IDP-Initiated SSO URL name: Nombre de fragmento de URL para hacer referencia al cliente cuando se desee realizar un SSO iniciado por IDP. Dejar este campo vac\u00edo deshabilitar\u00e1 el SSO iniciado por IDP. El URL que se referenciar\u00e1 desde el navegador ser\u00e1: server-root/realms/{realm}/protocol/saml/clients/{client-url-name}</p> </li> <li> <p>IDP Initiated SSO Relay State: Estado de relay que se desea enviar con la solicitud SAML cuando se desee realizar un SSO iniciado por IDP.</p> </li> <li> <p>Master SAML Processing URL: Esta URL se utiliza para todas las solicitudes SAML y la respuesta se dirige al SP. Se utiliza como la URL del Servicio de Consumidor de Afirmaciones y la URL del Servicio de Cierre de Sesi\u00f3n \u00danico.</p> </li> </ul> <p>Note</p> <p>Si las solicitudes de inicio de sesi\u00f3n contienen la URL del Servicio de Consumidor de Afirmaciones, esas solicitudes de inicio de sesi\u00f3n tendr\u00e1n prioridad. Esta URL debe ser validada por un patr\u00f3n de URL de redirecci\u00f3n v\u00e1lida registrado.</p>"},{"location":"clientes/clientes_saml/#capacidades-saml","title":"Capacidades SAML","text":"<ul> <li> <p>Name ID Format: El Formato de ID de Nombre para el sujeto. Este formato se utiliza si no se especifica ninguna pol\u00edtica de ID de nombre en una solicitud, o si el atributo Forzar Formato de ID de Nombre est\u00e1 activado.</p> </li> <li> <p>Force Name ID Format: Si una solicitud tiene una pol\u00edtica de ID de nombre, ign\u00f3rala y usa el valor configurado en la consola de administraci\u00f3n bajo Formato de ID de Nombre.</p> </li> <li> <p>Force POST Binding: De forma predeterminada, Keycloak responde utilizando el binding SAML inicial de la solicitud original. Al habilitar Forzar binding POST, Keycloak responde utilizando el binding POST de SAML, incluso si la solicitud original utiliz\u00f3 el binding de redirecci\u00f3n.</p> </li> <li> <p>Force artifact binding: Si est\u00e1 habilitado, los mensajes de respuesta se devuelven al cliente a trav\u00e9s del sistema de binding de artefactos SAML.</p> </li> <li> <p>Include AuthnStatement: Las respuestas de inicio de sesi\u00f3n SAML pueden especificar el m\u00e9todo de autenticaci\u00f3n utilizado, como la contrase\u00f1a, as\u00ed como las marcas de tiempo del inicio de sesi\u00f3n y la expiraci\u00f3n de la sesi\u00f3n. Incluir AuthnStatement est\u00e1 habilitado de forma predeterminada, por lo que el elemento AuthnStatement se incluir\u00e1 en las respuestas de inicio de sesi\u00f3n. Si se establece en OFF, se evita que los clientes determinen la duraci\u00f3n m\u00e1xima de la sesi\u00f3n, lo que puede crear sesiones de cliente que no expiren.</p> </li> <li> <p>Include OneTimeUse Condition: Si est\u00e1 habilitado, se incluye una Condici\u00f3n de Un Solo Uso en las respuestas de inicio de sesi\u00f3n.</p> </li> <li> <p>Optimize REDIRECT signing key lookup: Cuando est\u00e1 activado, los mensajes de protocolo SAML incluyen la extensi\u00f3n nativa de Keycloak. Esta extensi\u00f3n contiene una pista con el ID de la clave de firma. El SP utiliza la extensi\u00f3n para la validaci\u00f3n de la firma en lugar de intentar validar la firma utilizando claves.</p> <p>Note</p> <p>Esta opci\u00f3n se aplica a los bindings REDIRECT donde la firma se transfiere en los par\u00e1metros de consulta y esta informaci\u00f3n no se encuentra en la informaci\u00f3n de la firma. Esto es contrario a los mensajes de binding POST donde el ID de la clave siempre se incluye en la firma del documento. Esta opci\u00f3n se utiliza cuando el servidor y el adaptador de Keycloak proporcionan el IDP y el SP. Esta opci\u00f3n solo es relevante cuando Documentos firmados est\u00e1 activado.</p> </li> </ul>"},{"location":"clientes/clientes_saml/#firma-y-cifrado","title":"Firma y cifrado","text":"<ul> <li> <p>Sign Documents: Cuando est\u00e1 activado, Keycloak firma el documento utilizando la clave privada del realm.</p> </li> <li> <p>Sign Assertions: La afirmaci\u00f3n est\u00e1 firmada e incrustada en la respuesta XML SAML Auth.</p> </li> <li> <p>Signature Algorithm: El algoritmo utilizado para firmar documentos SAML. Ten en cuenta que los algoritmos basados en SHA1 est\u00e1n obsoletos y pueden ser eliminados en una versi\u00f3n futura. Se recomienda el uso de alg\u00fan algoritmo m\u00e1s seguro en lugar de _SHA1. Adem\u00e1s, con los algoritmos _SHA1, la verificaci\u00f3n de firmas no funciona si el cliente SAML se ejecuta en Java 17 o superior.</p> </li> <li> <p>SAML Signature Key Name: Los documentos SAML firmados enviados utilizando binding POST contienen la identificaci\u00f3n de la clave de firma en el elemento KeyName. Esta acci\u00f3n puede ser controlada por la opci\u00f3n Nombre de la Clave de Firma SAML. Esta opci\u00f3n controla el contenido de KeyName.</p> <ul> <li> <p>KEY_ID: El KeyName contiene el ID de la clave. Esta opci\u00f3n es la opci\u00f3n predeterminada.</p> </li> <li> <p>CERT_SUBJECT: El KeyName contiene el sujeto del certificado correspondiente a la clave del realm. Esta opci\u00f3n es esperada por Microsoft Active Directory Federation Services.</p> </li> <li> <p>NONE: La pista de KeyName se omite completamente del mensaje SAML.</p> </li> </ul> </li> <li> <p>Canonicalization Method: El m\u00e9todo de canonicalizaci\u00f3n para firmas XML.</p> </li> </ul>"},{"location":"clientes/clientes_saml/#configuracion-de-inicio-de-sesion","title":"Configuraci\u00f3n de inicio de sesi\u00f3n","text":"<ul> <li> <p>Login theme: Un tema para usar en las p\u00e1ginas de inicio de sesi\u00f3n, OTP, registro de concesiones y contrase\u00f1a olvidada.</p> </li> <li> <p>Consent required: Si est\u00e1 habilitado, los usuarios deben dar su consentimiento para el acceso del cliente.   Para los clientes del lado del cliente que realizan inicios de sesi\u00f3n en el navegador, como no es posible garantizar que los secretos puedan mantenerse seguros con los clientes del lado del cliente, es importante restringir el acceso configurando las URLs de redirecci\u00f3n correctas.</p> </li> <li> <p>Display client on screen: Este interruptor se aplica si Consentimiento requerido est\u00e1 Off.</p> <ul> <li> <p>Off: La pantalla de consentimiento contendr\u00e1 solo los consentimientos correspondientes a los alcances del cliente configurados.</p> </li> <li> <p>On: Tambi\u00e9n habr\u00e1 un elemento en la pantalla de consentimiento sobre este cliente en s\u00ed.</p> </li> </ul> </li> <li> <p>Client consent screen text: Aplica si Consentimiento requerido y Mostrar cliente en pantalla est\u00e1n habilitados. Contiene el texto que estar\u00e1 en la pantalla de consentimiento sobre los permisos para este cliente.</p> </li> </ul>"},{"location":"clientes/clientes_saml/#configuracion-de-cierre-de-sesion","title":"Configuraci\u00f3n de cierre de sesi\u00f3n","text":"<ul> <li>Front channel logout: Si el Cierre de sesi\u00f3n por Canal de Frente est\u00e1 habilitado, la aplicaci\u00f3n requiere una redirecci\u00f3n del navegador para realizar un cierre de sesi\u00f3n. Por ejemplo, la aplicaci\u00f3n puede requerir que se restablezca una cookie, lo que solo podr\u00eda hacerse a trav\u00e9s de una redirecci\u00f3n. Si el Cierre de sesi\u00f3n por Canal de Frente est\u00e1 deshabilitado, Keycloak invoca una solicitud SAML en segundo plano para cerrar la sesi\u00f3n de la aplicaci\u00f3n.</li> </ul>"},{"location":"clientes/clientes_saml/#pestana-claves","title":"Pesta\u00f1a Claves","text":"<ul> <li> <p>Encrypt Assertions: Cifra las afirmaciones en documentos SAML con la clave privada del realm. El algoritmo AES utiliza un tama\u00f1o de clave de 128 bits.</p> </li> <li> <p>Client Signature Required: Si la Firma del Cliente Requerida est\u00e1 habilitada, se espera que los documentos provenientes de un cliente est\u00e9n firmados. Keycloak validar\u00e1 esta firma utilizando la clave p\u00fablica del cliente o el certificado configurado en la pesta\u00f1a Claves.</p> </li> <li> <p>Allow ECP Flow: Si es verdadero, a esta aplicaci\u00f3n se le permite utilizar el perfil ECP de SAML para la autenticaci\u00f3n.</p> </li> </ul>"},{"location":"clientes/clientes_saml/#pestana-avanzado","title":"Pesta\u00f1a Avanzado","text":"<p>Esta pesta\u00f1a tiene muchos campos para situaciones espec\u00edficas. Algunos campos se cubren en otros temas. Para obtener detalles sobre otros campos, haz clic en el \u00edcono de interrogaci\u00f3n.</p>"},{"location":"clientes/clientes_saml/#configuracion-detallada-del-punto-final-saml","title":"Configuraci\u00f3n detallada del punto final SAML","text":"<ul> <li> <p>Logo URL: URL que hace referencia a un logotipo para la aplicaci\u00f3n Cliente.</p> </li> <li> <p>Policy URL: URL que el Cliente Parte Dependiente proporciona al Usuario Final para leer sobre c\u00f3mo se utilizar\u00e1n los datos del perfil.</p> </li> <li> <p>Terms of Service URL: URL que el Cliente Parte Dependiente proporciona al Usuario Final para leer los t\u00e9rminos de servicio de la Parte Dependiente.</p> </li> <li> <p>Assertion Consumer Service POST Binding URL: URL de binding POST para el Servicio de Consumidor de Afirmaciones.</p> </li> <li> <p>Assertion Consumer Service Redirect Binding URL: URL de binding de redirecci\u00f3n para el Servicio de Consumidor de Afirmaciones.</p> </li> <li> <p>Logout Service POST Binding URL: URL de binding POST para el Servicio de Cierre de Sesi\u00f3n.</p> </li> <li> <p>Logout Service Redirect Binding URL: URL de binding de redirecci\u00f3n para el Servicio de Cierre de Sesi\u00f3n.</p> </li> <li> <p>Logout Service Artifact Binding URL: URL de binding de artefactos para el Servicio de Cierre de Sesi\u00f3n. Cuando se configura junto con la opci\u00f3n Forzar binding de artefactos, el binding de artefactos se fuerza tanto para los flujos de inicio de sesi\u00f3n como de cierre de sesi\u00f3n. El binding de artefactos no se utiliza para el cierre de sesi\u00f3n a menos que se establezca esta propiedad.</p> </li> <li> <p>Logout Service SOAP Binding URL: URL de binding de redirecci\u00f3n para el Servicio de Cierre de Sesi\u00f3n. Solo aplicable si se utiliza el cierre de sesi\u00f3n por canal de fondo.</p> </li> <li> <p>Artifact Binding URL: URL para enviar los mensajes de artefacto HTTP.</p> </li> <li> <p>Artifact Resolution Service: URL del punto final SOAP del cliente donde se enviar\u00e1n los mensajes ArtifactResolve.</p> </li> </ul> <p>Para ver m\u00e1s informaci\u00f3n sobre la configuraci\u00f3n de clients, consulta la documentaci\u00f3n oficial</p>"},{"location":"permisos/","title":"Asignaci\u00f3n de permisos utilizando roles y grupos","text":"<p>Los roles y grupos tienen un prop\u00f3sito similar, que es otorgar a los usuarios acceso y permisos para utilizar aplicaciones. Los grupos son una colecci\u00f3n de usuarios a los que se les aplican roles y atributos. Los roles definen permisos espec\u00edficos de aplicaciones y control de acceso.</p> <p>Un rol t\u00edpicamente se aplica a un tipo de usuario. Por ejemplo, una organizaci\u00f3n puede incluir roles de administrador, usuario, gerente y empleado. Una aplicaci\u00f3n puede asignar acceso y permisos a un rol y luego asignar m\u00faltiples usuarios a ese rol para que todos los usuarios tengan el mismo acceso y permisos. Por ejemplo, la Consola de Administraci\u00f3n tiene roles que otorgan permiso a los usuarios para acceder a diferentes partes de la Consola de Administraci\u00f3n.</p> <p>Hay un espacio de nombres global para los roles, y cada cliente tambi\u00e9n tiene su propio espacio de nombres dedicado donde se pueden definir roles.</p>"},{"location":"permisos/grupos/","title":"Grupos","text":"<p>Los grupos en Keycloak gestionan un conjunto com\u00fan de atributos y asignaciones de roles para cada usuario. Los usuarios pueden ser miembros de cualquier n\u00famero de grupos y heredan los atributos y asignaciones de roles asignados a cada grupo.</p> <p>Para gestionar grupos, haz clic en Groups en el men\u00fa.</p> <p></p> <p>Los grupos son jer\u00e1rquicos. Un grupo puede tener m\u00faltiples subgrupos, pero un grupo solo puede tener un padre. Los subgrupos heredan los atributos y asignaciones de roles de su padre. Los usuarios heredan los atributos y asignaciones de roles de su padre tambi\u00e9n.</p> <p>Si tienes un grupo padre y un grupo hijo, y un usuario que pertenece solo al grupo hijo, el usuario en el grupo hijo hereda los atributos y asignaciones de roles tanto del grupo padre como del grupo hijo.</p> <p>La jerarqu\u00eda de un grupo a veces se representa usando la ruta del grupo. La ruta es la lista completa de nombres que representa la jerarqu\u00eda de un grupo espec\u00edfico, de arriba hacia abajo y separada por barras inclinadas / (similar a los archivos en un sistema de archivos). Por ejemplo, una ruta puede ser /superior/nivel1/nivel2, lo que significa que superior es un grupo de nivel superior y es padre de nivel1, que a su vez es padre de nivel2. Esta ruta representa de manera inequ\u00edvoca la jerarqu\u00eda para el grupo nivel2.</p> <p>Debido a razones hist\u00f3ricas, Keycloak no escapa las barras inclinadas en el nombre del grupo. Por lo tanto, un grupo llamado nivel1/grupo bajo superior usa la ruta /superior/nivel1/grupo, lo que es enga\u00f1oso. Keycloak puede iniciarse con la opci\u00f3n --spi-group-jpa-escape-slashes-in-group-path=true y entonces las barras inclinadas en el nombre se escapan con el car\u00e1cter . El car\u00e1cter de escape marca que la barra inclinada es parte del nombre y no tiene un significado jer\u00e1rquico. El ejemplo anterior de la ruta ser\u00eda /superior/nivel1/grupo cuando est\u00e1 escapado.</p> <pre><code>bin/kc.[sh|bat] start --spi-group-jpa-escape-slashes-in-group-path=true\n</code></pre> <p>El siguiente ejemplo incluye un grupo de nivel superior Ventas y un subgrupo hijo, Norteam\u00e9rica.</p> <ol> <li> <p>Haz clic en el grupo.</p> </li> <li> <p>Haz clic en Create group.</p> </li> <li> <p>Introduce un nombre para el grupo.</p> </li> <li> <p>Haz clic en Create.</p> </li> <li> <p>Haz clic en el nombre del grupo.</p> </li> </ol> <p>Se muestra la p\u00e1gina de gesti\u00f3n del grupo.</p> <p></p> <p>Los atributos y asignaciones de roles que definen son heredados por los grupos y usuarios que son miembros del grupo.</p> <p>Para agregar un usuario a un grupo:</p> <ol> <li> <p>Haz clic en Users en el men\u00fa.</p> </li> <li> <p>Haz clic en el usuario al que deseas realizar una asignaci\u00f3n de roles. Si el usuario no aparece, haz clic en View all users.</p> </li> <li> <p>Haz clic en Groups.</p> </li> </ol> <p></p> <ol> <li> <p>Haz clic en Join Group.</p> </li> <li> <p>Selecciona un grupo en el di\u00e1logo.</p> </li> <li> <p>Selecciona un grupo del \u00e1rbol Available Groups.</p> </li> <li> <p>Haz clic en Join.</p> </li> </ol> <p>Para eliminar un grupo de un usuario:</p> <ol> <li> <p>Haz clic en Users en el men\u00fa.</p> </li> <li> <p>Haz clic en el usuario que deseas eliminar del grupo.</p> </li> <li> <p>Haz clic en Leave en la fila de la tabla de grupos.</p> </li> </ol> <p>En este ejemplo, el usuario jimlincoln est\u00e1 en el grupo Norteam\u00e9rica. Puedes ver a jimlincoln bajo la pesta\u00f1a Miembros del grupo.</p> <p></p>"},{"location":"permisos/grupos/#comparacion-entre-grupos-y-roles","title":"Comparaci\u00f3n entre grupos y roles","text":"<p>Los grupos y roles tienen algunas similitudes y diferencias. En Keycloak, los grupos son una colecci\u00f3n de usuarios a los que se les aplican roles y atributos. Los roles definen tipos de usuarios y las aplicaciones asignan permisos y control de acceso a los roles.</p> <p>Los roles compuestos son similares a los grupos ya que brindan la misma funcionalidad. La diferencia entre ellos es conceptual. Los roles compuestos aplican el modelo de permisos a un conjunto de servicios y aplicaciones. Usa roles compuestos para gestionar aplicaciones y servicios.</p> <p>Los grupos se enfocan en colecciones de usuarios y sus roles en una organizaci\u00f3n. Usa grupos para gestionar usuarios.</p>"},{"location":"permisos/grupos/#uso-de-grupos-predeterminados","title":"Uso de grupos predeterminados","text":"<p>Para asignar autom\u00e1ticamente la pertenencia a un grupo a cualquier usuario que sea creado o importado a trav\u00e9s de la intermediaci\u00f3n de identidad, utiliza grupos predeterminados.</p> <ol> <li> <p>Haz clic en Realm settings en el men\u00fa.</p> </li> <li> <p>Haz clic en la pesta\u00f1a User registration.</p> </li> <li> <p>Haz clic en la pesta\u00f1a Default Groups.</p> </li> </ol> <p></p>"},{"location":"permisos/roles/","title":"Roles","text":""},{"location":"permisos/roles/#creacion-de-un-rol-de-ambito","title":"Creaci\u00f3n de un rol de \u00e1mbito","text":"<p>Los roles a nivel de \u00e1mbito son un espacio de nombres para definir tus roles. Para ver la lista de roles, haz clic en Roles de \u00e1mbito en el men\u00fa.</p> <p></p> <ol> <li> <p>Haz clic en Create Role.</p> </li> <li> <p>Introduce un Role Name.</p> </li> <li> <p>Introduce una Description.</p> </li> <li> <p>Haz clic en Save.</p> </li> </ol> <p></p> <p>El campo de descripci\u00f3n se puede localizar especificando una variable de sustituci\u00f3n con cadenas ${var-name}. El valor localizado se configura en tu tema dentro de los archivos de propiedades de los temas.</p>"},{"location":"permisos/roles/#roles-de-cliente","title":"Roles de cliente","text":"<p>Los roles de cliente son espacios de nombres dedicados a los clientes. Cada cliente obtiene su propio espacio de nombres. Los roles de cliente se gestionan en la pesta\u00f1a Roles de cada cliente. Interact\u00faas con esta IU de la misma manera que con los roles a nivel de \u00e1mbito.</p>"},{"location":"permisos/roles/#conversion-de-un-rol-a-un-rol-compuesto","title":"Conversi\u00f3n de un rol a un rol compuesto","text":"<p>Cualquier rol a nivel de \u00e1mbito o cliente puede convertirse en un rol compuesto. Un rol compuesto es un rol que tiene uno o m\u00e1s roles adicionales asociados con \u00e9l. Cuando un rol compuesto se asigna a un usuario, el usuario adquiere los roles asociados con el rol compuesto. Esta herencia es recursiva, por lo que los usuarios tambi\u00e9n heredan cualquier compuesto de compuestos. Sin embargo, recomendamos que no se abuse de los roles compuestos.</p> <ol> <li> <p>Haz clic en Realm Roles en el men\u00fa.</p> </li> <li> <p>Haz clic en el rol que deseas convertir.</p> </li> <li> <p>En la lista de Acciones, selecciona Add associated roles.</p> </li> </ol> <p></p> <p>La IU de selecci\u00f3n de roles se muestra en la p\u00e1gina y puedes asociar roles a nivel de \u00e1mbito y a nivel de cliente con el rol compuesto que est\u00e1s creando.</p> <p>En este ejemplo, el rol a nivel de \u00e1mbito empleado est\u00e1 asociado con el rol compuesto desarrollador. Cualquier usuario con el rol desarrollador tambi\u00e9n hereda el rol empleado.</p> <p>Note</p> <p>Al crear tokens y aserciones SAML, cualquier compuesto tambi\u00e9n tiene sus roles asociados agregados a las reclamaciones y aserciones de la respuesta de autenticaci\u00f3n enviada de vuelta al cliente.</p>"},{"location":"permisos/roles/#asignacion-de-asignaciones-de-roles","title":"Asignaci\u00f3n de asignaciones de roles","text":"<p>Puedes asignar asignaciones de roles a un usuario a trav\u00e9s de la pesta\u00f1a Role Mappings para ese usuario.</p> <ol> <li> <p>Haz clic en Users en el men\u00fa.</p> </li> <li> <p>Haz clic en el usuario al que deseas realizar una asignaci\u00f3n de roles.</p> </li> <li> <p>Haz clic en la pesta\u00f1a Role mappings.</p> </li> <li> <p>Haz clic en Assign role.</p> </li> <li> <p>Selecciona el rol que deseas asignar al usuario en el di\u00e1logo.</p> </li> <li> <p>Haz clic en Assign.</p> </li> </ol> <p></p> <p>En el ejemplo anterior, estamos asignando el rol compuesto desarrollador a un usuario. Ese rol fue creado en el tema de Roles Compuestos.</p> <p></p> <p>Cuando se asigna el rol desarrollador, el rol empleado asociado con el rol compuesto desarrollador se muestra con Heredado True. Los roles heredados son los roles asignados expl\u00edcitamente a los usuarios y los roles que se heredan de los compuestos.</p>"},{"location":"permisos/roles/#uso-de-roles-predeterminados","title":"Uso de roles predeterminados","text":"<p>Utiliza roles predeterminados para asignar autom\u00e1ticamente asignaciones de roles de usuario cuando se crea o importa un usuario a trav\u00e9s de la intermediaci\u00f3n de identidad.</p> <ol> <li> <p>Haz clic en Realm settings en el men\u00fa.</p> </li> <li> <p>Haz clic en la pesta\u00f1a User registration.</p> </li> </ol> <p></p>"},{"location":"permisos/roles/#asignaciones-de-ambito-de-roles","title":"Asignaciones de \u00e1mbito de roles","text":"<p>Al crear un token de acceso OIDC o una aserci\u00f3n SAML, las asignaciones de roles de usuario se convierten en reclamaciones dentro del token o aserci\u00f3n. Las aplicaciones utilizan estas reclamaciones para tomar decisiones de acceso sobre los recursos controlados por la aplicaci\u00f3n. Keycloak firma digitalmente los tokens de acceso y las aplicaciones los reutilizan para invocar servicios REST seguros de forma remota. Sin embargo, estos tokens tienen un riesgo asociado. Un atacante puede obtener estos tokens y utilizar sus permisos para comprometer tus redes. Para evitar esta situaci\u00f3n, utiliza Asignaciones de \u00c1mbito de Roles.</p> <p>Las Asignaciones de \u00c1mbito de Roles limitan los roles declarados dentro de un token de acceso. Cuando un cliente solicita una autenticaci\u00f3n de usuario, el token de acceso que recibe contiene solo las asignaciones de roles que se especifican expl\u00edcitamente para el \u00e1mbito del cliente. El resultado es que limitas los permisos de cada token de acceso individual en lugar de otorgar al cliente acceso a todos los permisos de los usuarios.</p> <p>De manera predeterminada, cada cliente obtiene todas las asignaciones de roles del usuario. Puedes ver las asignaciones de roles para un cliente.</p> <ol> <li> <p>Haz clic en Clients en el men\u00fa.</p> </li> <li> <p>Haz clic en el cliente para ver los detalles.</p> </li> <li> <p>Haz clic en la pesta\u00f1a Client scopes.</p> </li> <li> <p>Haz clic en el enlace en la fila con el alcance dedicado y los asignadores para este cliente.</p> </li> <li> <p>Haz clic en la pesta\u00f1a Scope.</p> </li> </ol> <p></p> <p>De manera predeterminada, los roles efectivos de los \u00e1mbitos son todos los roles declarados en el \u00e1mbito. Para cambiar este comportamiento predeterminado, cambia Full Scope Allowed a OFF y declara los roles espec\u00edficos que deseas en cada cliente. Tambi\u00e9n puedes usar los alcances de cliente para definir las mismas asignaciones de \u00e1mbito de rol para un conjunto de clientes.</p> <p></p>"},{"location":"realms/","title":"Realms","text":"<p>Teniendo una cuenta con acceso a la Consola de Administraci\u00f3n, puedes configurar realms. Un realm es un espacio donde gestionas objetos, incluidos usuarios, aplicaciones, roles y grupos. Un usuario pertenece a un realm e inicia sesi\u00f3n en \u00e9l. Una implementaci\u00f3n de Keycloak puede definir, almacenar y gestionar tantos realms como permita el espacio en la base de datos.</p>"},{"location":"realms/#uso-de-la-consola-de-administracion","title":"Uso de la Consola de Administraci\u00f3n","text":"<ol> <li> <p>Ve a la URL de la Consola de Administraci\u00f3n. Por ejemplo, para localhost, usa esta URL: http://localhost:8080/admin/</p> <p></p> </li> <li> <p>Ingresa el nombre de usuario y la contrase\u00f1a con permisos de administraci\u00f3n. Esta acci\u00f3n mostrar\u00e1 la Consola de Administraci\u00f3n.</p> <p></p> </li> <li> <p>Ten en cuenta los men\u00fas y otras opciones que puedes usar:</p> <ul> <li> <p>Haz clic en el men\u00fa etiquetado como Master para elegir un realm que desees gestionar o para crear uno nuevo.</p> <p></p> </li> <li> <p>Haz clic en la lista en la parte superior derecha para ver tu cuenta o cerrar sesi\u00f3n.</p> <p></p> </li> <li> <p>Haz clic en un icono de signo de interrogaci\u00f3n (?) para mostrar un texto de ayuda que describe ese campo. La imagen del punto 2 muestra la ayuda en acci\u00f3n.</p> </li> </ul> </li> </ol> <p>Info</p> <p>Los archivos exportados desde la Consola de Administraci\u00f3n no son adecuados para copias de seguridad o transferencia de datos entre servidores. Solo las exportaciones en tiempo de arranque son adecuadas para copias de seguridad o transferencia de datos entre servidores.</p>"},{"location":"realms/#el-realm-master","title":"El realm master","text":"<p>En la Consola de Administraci\u00f3n existen dos tipos de realms:</p> <ul> <li>Realm master: Este realm se cre\u00f3 para ti cuando iniciaste Keycloak por primera vez. Contiene la cuenta de administrador que se cre\u00f3 en el primer inicio de sesi\u00f3n. Usa el realm master s\u00f3lo para crear y gestionar los realms en tu sistema.</li> <li> <p>Otros realms: Estos realms son creados por el administrador en el realm master. En estos realms, los administradores gestionan a los usuarios de tu organizaci\u00f3n y las aplicaciones que necesitan. Las aplicaciones son propiedad de los usuarios.</p> <p></p> </li> </ul> <p>Los realms est\u00e1n aislados entre s\u00ed y solo pueden gestionar y autenticar a los usuarios que controlan. Seguir este modelo de seguridad ayuda a prevenir cambios accidentales y sigue la tradici\u00f3n de permitir que las cuentas de usuario accedan s\u00f3lo a aquellos privilegios y poderes necesarios para la finalizaci\u00f3n exitosa de su tarea actual.</p>"},{"location":"realms/#creacion-de-un-realm","title":"Creaci\u00f3n de un realm","text":"<p>Creas un Realm para proporcionar un espacio de gesti\u00f3n donde puedas crear usuarios y darles permisos para usar aplicaciones. En el primer inicio de sesi\u00f3n, normalmente est\u00e1s en el realm master, el realm de nivel superior desde el cual creas otros realms.</p> <p>Al decidir qu\u00e9 realms necesitas, considera el tipo de aislamiento que deseas tener para tus usuarios y aplicaciones. Por ejemplo, podr\u00edas crear un realm para los empleados de tu empresa y un realm separado para tus clientes. Tus empleados iniciar\u00edan sesi\u00f3n en el realm de empleados y solo podr\u00edan visitar aplicaciones internas de la empresa. Los clientes iniciar\u00edan sesi\u00f3n en el realm de clientes y solo podr\u00edan interactuar con aplicaciones orientadas al cliente.</p> <ol> <li> <p>Haz clic en Keycloak junto al realm master, luego haz clic en Crear Realm.</p> <p></p> </li> <li> <p>Ingresa un nombre para el realm.</p> </li> <li> <p>Haz clic en Crear.</p> <p></p> </li> </ol> <p>El realm actual ahora se ha establecido en el realm que acabas de crear. Puedes cambiar entre realms haciendo clic en el nombre del realm en el men\u00fa.</p>"},{"location":"realms/configuration/","title":"Configuraciones","text":""},{"location":"realms/configuration/#configuracion-de-ssl-para-un-realm","title":"Configuraci\u00f3n de SSL para un realm","text":"<p>Cada realm tiene un Modo SSL asociado, que define los requisitos de SSL/HTTPS para interactuar con el realm. Los navegadores y aplicaciones que interact\u00faan con el realm deben cumplir con los requisitos de SSL/HTTPS definidos por el Modo SSL, de lo contrario, no podr\u00e1n interactuar con el servidor.</p> <ol> <li>Haz clic en Realm settings (Configuraci\u00f3n del realm) en el men\u00fa.</li> <li> <p>Haz clic en la pesta\u00f1a General.</p> <p></p> </li> <li> <p>Establece Require SSL (Requerir SSL) en uno de los siguientes modos SSL:</p> </li> <li>External requests (Solicitudes externas): Los usuarios pueden interactuar con Keycloak sin SSL siempre que se limiten a direcciones IP privadas, como localhost, 127.0.0.1, 10.x.x.x, 192.168.x.x y 172.16.x.x. Si intentas acceder a Keycloak sin SSL desde una direcci\u00f3n IP no privada, recibir\u00e1s un error.</li> <li>None (Ninguno): Keycloak no requiere SSL. Esta opci\u00f3n se aplica solo en desarrollo cuando est\u00e1s experimentando y no planeas utilizar esta implementaci\u00f3n en producci\u00f3n.</li> <li>All requests (Todas las solicitudes): Keycloak requiere SSL para todas las direcciones IP.</li> </ol>"},{"location":"realms/configuration/#configuracion-de-correo-electronico-para-un-realm","title":"Configuraci\u00f3n de correo electr\u00f3nico para un realm","text":"<p>Keycloak env\u00eda correos electr\u00f3nicos a los usuarios para verificar sus direcciones de correo electr\u00f3nico, cuando olvidan sus contrase\u00f1as o cuando un administrador necesita recibir notificaciones sobre un evento del servidor. Para habilitar que Keycloak env\u00ede correos electr\u00f3nicos, debes proporcionar a Keycloak la configuraci\u00f3n de tu servidor SMTP.</p> <ol> <li> <p>Haz clic en Realm settings (Configuraci\u00f3n del realm) en el men\u00fa.</p> </li> <li> <p>Haz clic en la pesta\u00f1a Email (Correo electr\u00f3nico).</p> <p></p> </li> <li> <p>Rellena los campos y activa los interruptores seg\u00fan sea necesario:</p> <ol> <li> <p>Template</p> <ul> <li>From: Indica la direcci\u00f3n utilizada para el campo \"De\" en el encabezado SMTP de los correos electr\u00f3nicos enviados.</li> <li>From display name: Permite configurar un alias de direcci\u00f3n de correo electr\u00f3nico amigable (opcional). Si no se establece, se mostrar\u00e1 la direcci\u00f3n de correo electr\u00f3nico simple en los clientes de correo.</li> <li>Reply to: Indica la direcci\u00f3n utilizada para el campo \"Responder a\" en el encabezado SMTP de los correos enviados (opcional). Si no se establece, se usar\u00e1 la direcci\u00f3n de correo simple \"De\".</li> <li>Reply to display name: Permite configurar un alias de direcci\u00f3n de correo electr\u00f3nico amigable (opcional). Si no se establece, se mostrar\u00e1 la direcci\u00f3n simple \"Responder a\".</li> <li>Envelope from: Indica la direcci\u00f3n de rebote utilizada para el encabezado Return-Path en los correos enviados (opcional).</li> </ul> </li> <li> <p>Conexi\u00f3n y autenticaci\u00f3n</p> <ul> <li>Host: Indica el nombre del servidor SMTP utilizado para enviar correos electr\u00f3nicos.</li> <li>Port: Indica el puerto del servidor SMTP.</li> <li>Encryption: Marca una de estas casillas de verificaci\u00f3n para admitir el env\u00edo de correos electr\u00f3nicos para la recuperaci\u00f3n de nombres de usuario y contrase\u00f1as, especialmente si el servidor SMTP est\u00e1 en una red externa. Es probable que debas cambiar el puerto a 465, el puerto predeterminado para SSL/TLS.</li> <li>Authentication: Activa este interruptor si tu servidor SMTP requiere autenticaci\u00f3n. Cuando se te solicite, proporciona el nombre de usuario y la contrase\u00f1a. El valor del campo de contrase\u00f1a puede referirse a un valor de un almac\u00e9n externo.</li> </ul> </li> </ol> </li> </ol>"},{"location":"realms/configuration/#habilitar-internacionalizacion","title":"Habilitar internacionalizaci\u00f3n","text":"<p>Cada pantalla de la interfaz de usuario en Keycloak est\u00e1 internacionalizada. El idioma predeterminado es ingl\u00e9s, pero puedes elegir qu\u00e9 configuraciones regionales deseas soportar y cu\u00e1l ser\u00e1 la configuraci\u00f3n regional predeterminada.</p> <ol> <li> <p>Haz clic en Realm settings (Configuraci\u00f3n del realm) en el men\u00fa.</p> </li> <li> <p>Haz clic en la pesta\u00f1a Localizati\u00f3n.</p> </li> <li> <p>Habilita la Internationalization.</p> </li> <li> <p>Selecciona los idiomas que soportar\u00e1s.</p> </li> </ol> <p> </p> <p>La pr\u00f3xima vez que un usuario inicie sesi\u00f3n, podr\u00e1 elegir un idioma en la p\u00e1gina de inicio de sesi\u00f3n para usar en las pantallas de inicio de sesi\u00f3n, la Consola de Cuenta y la Consola de Administraci\u00f3n.</p> <p></p>"},{"location":"realms/options/","title":"Control de las opciones de inicio de sesi\u00f3n","text":"<p>Keycloak incluye varias funciones integradas en la p\u00e1gina de inicio de sesi\u00f3n.</p>"},{"location":"realms/options/#habilitar-olvide-mi-contrasena","title":"Habilitar \"Olvid\u00e9 mi contrase\u00f1a\"","text":"<p>Si habilitas la opci\u00f3n \"Olvid\u00e9 mi contrase\u00f1a\", los usuarios pueden restablecer sus credenciales de inicio de sesi\u00f3n si olvidan sus contrase\u00f1as o pierden su generador de OTP.</p> <ol> <li> <p>Haz clic en Realm settings (Configuraci\u00f3n del realm)  en el men\u00fa.</p> </li> <li> <p>Haz clic en la pesta\u00f1a Login.</p> <p></p> </li> <li> <p>Activa la opci\u00f3n Forgot password.    Un enlace \u00bfOlvidaste tu contrase\u00f1a? se mostrar\u00e1 en tus p\u00e1ginas de inicio de sesi\u00f3n.</p> <p></p> </li> <li> <p>Especifica Host y From en la pesta\u00f1a Email para que Keycloak pueda enviar el correo electr\u00f3nico de restablecimiento.</p> </li> <li> <p>Haz clic en este enlace para llevar a los usuarios a una p\u00e1gina donde pueden ingresar su nombre de usuario o direcci\u00f3n de correo electr\u00f3nico y recibir un correo electr\u00f3nico con un enlace para restablecer sus credenciales.</p> <p></p> </li> </ol> <p>El texto enviado en el correo electr\u00f3nico es configurable. </p> <p>Cuando los usuarios hagan clic en el enlace del correo electr\u00f3nico, Keycloak les pedir\u00e1 que actualicen su contrase\u00f1a y, si han configurado un generador de OTP, Keycloak les pedir\u00e1 que reconfiguren el generador de OTP. Dependiendo de los requisitos de seguridad de tu organizaci\u00f3n, es posible que no desees que los usuarios restablezcan su generador de OTP por correo electr\u00f3nico.</p> <p>Para cambiar este comportamiento, sigue estos pasos:</p> <ol> <li> <p>Haz clic en Authentication en el men\u00fa.</p> </li> <li> <p>Haz clic en la pesta\u00f1a Flows.</p> </li> <li> <p>Selecciona el flujo Reset Credentials.</p> <p></p> </li> <li> <p>Si no deseas restablecer el OTP, establece el requisito del sub-flujo Reset - Conditional OTP en Disabled.</p> <p></p> </li> <li> <p>Haz clic en Authentication en el men\u00fa.</p> </li> <li> <p>Haz clic en la pesta\u00f1a Required actions.</p> </li> <li> <p>Aseg\u00farate de que Update Password est\u00e9 habilitado.</p> <p></p> </li> </ol>"},{"location":"realms/options/#habilitar-recordarme","title":"Habilitar \"Recordarme\"","text":"<p>Si un usuario que ha iniciado sesi\u00f3n cierra su navegador, su sesi\u00f3n se destruye, y debe volver a iniciar sesi\u00f3n. Puedes configurar Keycloak para mantener la sesi\u00f3n de inicio de sesi\u00f3n abierta si el usuario hace clic en la casilla Recordarme al iniciar sesi\u00f3n. Esta acci\u00f3n convierte la cookie de inicio de sesi\u00f3n de una cookie de sesi\u00f3n a una cookie persistente.</p> <ol> <li> <p>Haz clic en Realm settings (Configuraci\u00f3n del realm)  en el men\u00fa.</p> </li> <li> <p>Haz clic en la pesta\u00f1a Login.</p> </li> <li> <p>Activa la opci\u00f3n Remember Me.</p> <p></p> </li> <li> <p>Cuando guardes esta configuraci\u00f3n, una casilla de verificaci\u00f3n Remember me se mostrar\u00e1 en la p\u00e1gina de inicio de sesi\u00f3n del realm.</p> <p></p> </li> </ol> <p>Para ver m\u00e1s informaci\u00f3n sobre la configuraci\u00f3n de realms, consulta la documentaci\u00f3n oficial</p>"}]}